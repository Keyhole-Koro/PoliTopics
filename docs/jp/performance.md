# バックエンド API レイテンシ比較

[English Version](../../docs/performance.md)

**AWS Lambda** と **Cloudflare Workers** で実行されているバックエンド API のレイテンシ測定結果。

> **測定スクリプト:** `profile/measure-backend-latency.js`
> このスクリプトは各バックエンドエンドポイントを繰り返し呼び出し、レイテンシ統計を記録します。

---

## コールドスタートレイテンシ

| エンドポイント | AWS Lambda   | Cloudflare Workers          |
| -------------- | ------------ | --------------------------- |
| `/headlines`   | 4600–6600 ms | - ms (コールドスタートなし) |
| `/article`     | ~6880 ms     | - ms (コールドスタートなし) |

---

## 定常状態レイテンシ (平均 / p95)

### `/headlines`

| プラットフォーム   |  平均 (ms) |   p95 (ms) |  最大 (ms) |
| ------------------ | ---------: | ---------: | ---------: |
| AWS Lambda         |      454.6 |    1496.98 |    1496.98 |
| Cloudflare Workers | **234.79** | **567.15** | **567.15** |

---

### `/article`

| プラットフォーム   |  平均 (ms) |   p95 (ms) |  最大 (ms) |
| ------------------ | ---------: | ---------: | ---------: |
| AWS Lambda         |     763.87 |    1446.46 |    1446.46 |
| Cloudflare Workers | **377.91** | **554.54** | **554.54** |

---

### `/suggest`

| プラットフォーム   | 平均 (ms) |   p95 (ms) |  最大 (ms) |
| ------------------ | --------: | ---------: | ---------: |
| AWS Lambda         |    296.75 |     630.88 |     630.88 |
| Cloudflare Workers | **85.88** | **211.02** | **211.02** |

---

## 全体比較 (平均レイテンシ)

| エンドポイント | AWS Lambda | Cloudflare Workers | 速さの倍率      |
| -------------- | ---------- | ------------------ | --------------- |
| `/headlines`   | 454.6 ms   | **234.79 ms**      | Workers (1.9倍) |
| `/article`     | 763.87 ms  | **377.91 ms**      | Workers (2.0倍) |
| `/suggest`     | 296.75 ms  | **85.88 ms**       | Workers (3.5倍) |

---

## サマリー

- **すべてのエンドポイントで Cloudflare Workers が AWS Lambda を上回る**
- **コールドスタートレイテンシは AWS Lambda の大きな欠点である**
- Workers は **テイルレイテンシ (p95) において大幅に優れており**、これはユーザー向け API にとって重要である
